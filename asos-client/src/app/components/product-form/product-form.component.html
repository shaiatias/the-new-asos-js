<div class="container my-4">
	<div class="row">
		<div class="col-md-8">
			<h1 class="my-4">Add Product</h1>
			<form #f="ngForm" (ngSubmit)="save(f.value)">
				<div class="form-group">
					<label for="name">Product name</label>
					<input
						#name="ngModel"
						[(ngModel)]="product.name"
						name="name"
						id="name"
						type="text"
						class="form-control"
						required
					/>
					<div
						class="alert alert-danger"
						*ngIf="name.touched && name.invalid"
					>
						name is required
					</div>
				</div>
				<div class="form-group">
					<label for="price">Price</label>
					<div class="input-group mb-3">
						<div class="input-group-prepend">
							<span class="input-group-text">$</span>
						</div>
						<input
							#price="ngModel"
							[(ngModel)]="product.price"
							name="price"
							id="price"
							type="text"
							class="form-control"
							required
						/>
					</div>
					<div
						class="alert alert-danger"
						*ngIf="price.touched && price.invalid"
					>
						price is required
					</div>
				</div>
				<div class="form-group">
					<label for="department">Department</label>
					<select
						#department="ngModel"
						[(ngModel)]="product.department"
						name="department"
						id="department"
						type="text"
						class="form-control"
						required
					>
						<option value=""></option>
						<option
							*ngFor="let d of departments$ | async"
							[value]="d.id"
							>{{ d.name }}</option
						>
					</select>
					<div
						class="alert alert-danger"
						*ngIf="department.touched && department.invalid"
					>
						department is required
					</div>
				</div>
				<div class="form-group">
					<label for="imageUrl">imageUrl</label>
					<input
						#imageUrl
						[(ngModel)]="product.imageUrl"
						name="imageUrl"
						id="imageUrl"
						type="text"
						class="form-control"
						required
					/>
					<div
						class="alert alert-danger"
						*ngIf="imageUrl.touched && imageUrl.invalid"
					>
						url is required
					</div>
					<div
						class="alert alert-danger"
						*ngIf="imageUrl.errors?.url"
					>
						this url is not a valid url
					</div>
				</div>
				<button class="btn btn-primary">Save</button>
				<!-- <button type="button" (click)="delete()" class="btn btn-danger">Delete</button> -->
			</form>
		</div>
		<div class="col-md-4">
			<div *ngIf="product.name" class="card">
				<img
					*ngIf="product.imageUrl"
					class="card-img-top"
					[src]="product.imageUrl"
					alt="product.name"
				/>
				<div class="card-body">
					<h5 class="card-title">{{ product.name }}</h5>
					<p class="card-text">
						{{ product.price | currency: "USD":true }}
					</p>
				</div>
			</div>
		</div>
	</div>
</div>
